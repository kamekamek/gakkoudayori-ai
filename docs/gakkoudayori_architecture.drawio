<mxfile host="app.diagrams.net" modified="2025-06-24T12:00:00.000Z" agent="6.0 (Claude Code)" etag="abc123" version="24.7.17" type="device">
  <diagram name="学校だよりAI システムアーキテクチャ" id="architecture">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1400" pageHeight="900" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- Background and Title -->
        <mxCell id="title" value="🌸 学校だよりAI システムアーキテクチャ" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=24;fontStyle=1;fontColor=#FF6B9D;" vertex="1" parent="1">
          <mxGeometry x="400" y="20" width="600" height="40" as="geometry" />
        </mxCell>

        <!-- User Section -->
        <mxCell id="user_section" value="教師・ユーザー" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;strokeWidth=3;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="100" width="200" height="60" as="geometry" />
        </mxCell>

        <!-- Flutter Web -->
        <mxCell id="flutter" value="&lt;img src=&quot;data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI0OCIgaGVpZ2h0PSI0OCIgdmlld0JveD0iMCAwIDQ4IDQ4Ij4mI3hhOzxwYXRoIGZpbGw9IiMwMjc3YmQiIGQ9Ik0yNCAyOGwxMiAxMmgtOGwtNC00eiIvPiYjeGE7PHBhdGggZmlsbD0iIzAyODhkMSIgZD0iTTI0IDI4bDEyLTEyaDhsLTE2IDE2eiIvPiYjeGE7PHBhdGggZmlsbD0iIzAyOGRkMSIgZD0iTTEyIDQwaDIwdjhoLTIweiIvPiYjeGE7PHBhdGggZmlsbD0iIzAyODhkMSIgZD0iTTI0IDI4bC0xMiAxMmgtOGwxNi0xNnoiLz4mI3hhOzwvc3ZnPg==&quot; width=&quot;32&quot; height=&quot;32&quot;&gt;&lt;br&gt;&lt;b&gt;Flutter Web&lt;/b&gt;&lt;br&gt;PWA対応&lt;br&gt;教師用UI" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#42A5F5;strokeWidth=2;align=center;" vertex="1" parent="1">
          <mxGeometry x="50" y="200" width="120" height="100" as="geometry" />
        </mxCell>

        <!-- Voice Input -->
        <mxCell id="voice" value="🎤&lt;br&gt;&lt;b&gt;音声入力&lt;/b&gt;&lt;br&gt;MediaRecorder API&lt;br&gt;WebRTC録音" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F3E5F5;strokeColor=#9C27B0;strokeWidth=2;align=center;" vertex="1" parent="1">
          <mxGeometry x="50" y="330" width="120" height="100" as="geometry" />
        </mxCell>

        <!-- Google Cloud Platform Section -->
        <mxCell id="gcp_section" value="Google Cloud Platform" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F0FE;strokeColor=#4285F4;strokeWidth=3;fontSize=16;fontStyle=1;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="300" y="80" width="700" height="500" as="geometry" />
        </mxCell>

        <!-- Cloud Run -->
        <mxCell id="cloudrun" value="⚡&lt;br&gt;&lt;b&gt;Cloud Run&lt;/b&gt;&lt;br&gt;FastAPI + ADK Server&lt;br&gt;コンテナ実行環境" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F0FE;strokeColor=#4285F4;strokeWidth=2;align=center;" vertex="1" parent="1">
          <mxGeometry x="580" y="120" width="140" height="100" as="geometry" />
        </mxCell>

        <!-- ADK Multi-Agent Section -->
        <mxCell id="adk_section" value="🤖 Google ADK マルチエージェント" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#4CAF50;strokeWidth=3;fontSize=14;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="320" y="260" width="660" height="200" as="geometry" />
        </mxCell>

        <!-- Orchestrator Agent -->
        <mxCell id="orchestrator" value="🎯&lt;br&gt;&lt;b&gt;Orchestrator&lt;/b&gt;&lt;br&gt;Agent&lt;br&gt;ワークフロー制御" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#4CAF50;strokeWidth=2;align=center;" vertex="1" parent="1">
          <mxGeometry x="340" y="300" width="100" height="80" as="geometry" />
        </mxCell>

        <!-- Planner Agent -->
        <mxCell id="planner" value="💭&lt;br&gt;&lt;b&gt;Planner&lt;/b&gt;&lt;br&gt;Agent&lt;br&gt;対話・計画立案" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#4CAF50;strokeWidth=2;align=center;" vertex="1" parent="1">
          <mxGeometry x="460" y="300" width="100" height="80" as="geometry" />
        </mxCell>

        <!-- Generator Agent -->
        <mxCell id="generator" value="📝&lt;br&gt;&lt;b&gt;Generator&lt;/b&gt;&lt;br&gt;Agent&lt;br&gt;HTML通信生成" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#C8E6C9;strokeColor=#4CAF50;strokeWidth=2;align=center;" vertex="1" parent="1">
          <mxGeometry x="580" y="300" width="100" height="80" as="geometry" />
        </mxCell>

        <!-- Tools Section -->
        <mxCell id="tools_label" value="🔧 ADK Tools" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;fontSize=12;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="700" y="280" width="100" height="20" as="geometry" />
        </mxCell>

        <mxCell id="tool1" value="Speech-to-Text" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#4CAF50;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="720" y="300" width="80" height="25" as="geometry" />
        </mxCell>

        <mxCell id="tool2" value="User Dict" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#4CAF50;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="820" y="300" width="70" height="25" as="geometry" />
        </mxCell>

        <mxCell id="tool3" value="HTML Template" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#4CAF50;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="720" y="335" width="80" height="25" as="geometry" />
        </mxCell>

        <mxCell id="tool4" value="PDF Export" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#4CAF50;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="820" y="335" width="70" height="25" as="geometry" />
        </mxCell>

        <mxCell id="tool5" value="HTML Validator" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#4CAF50;fontSize=10;" vertex="1" parent="1">
          <mxGeometry x="720" y="370" width="80" height="25" as="geometry" />
        </mxCell>

        <!-- Vertex AI Gemini -->
        <mxCell id="gemini" value="✨&lt;br&gt;&lt;b&gt;Vertex AI Gemini&lt;/b&gt;&lt;br&gt;2.5 Flash&lt;br&gt;文章リライト・整形" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF8E1;strokeColor=#FFC107;strokeWidth=2;align=center;" vertex="1" parent="1">
          <mxGeometry x="580" y="480" width="140" height="80" as="geometry" />
        </mxCell>

        <!-- Firebase Services -->
        <mxCell id="firebase_auth" value="🔐&lt;br&gt;&lt;b&gt;Firebase&lt;/b&gt;&lt;br&gt;Authentication&lt;br&gt;ユーザー管理" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#FF9800;strokeWidth=2;align=center;" vertex="1" parent="1">
          <mxGeometry x="1100" y="120" width="120" height="100" as="geometry" />
        </mxCell>

        <mxCell id="firestore" value="📄&lt;br&gt;&lt;b&gt;Cloud Firestore&lt;/b&gt;&lt;br&gt;NoSQL Database&lt;br&gt;通信データ保存" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#FF9800;strokeWidth=2;align=center;" vertex="1" parent="1">
          <mxGeometry x="1100" y="250" width="120" height="100" as="geometry" />
        </mxCell>

        <mxCell id="cloud_storage" value="💾&lt;br&gt;&lt;b&gt;Cloud Storage&lt;/b&gt;&lt;br&gt;Object Storage&lt;br&gt;PDF・画像ファイル" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#FF9800;strokeWidth=2;align=center;" vertex="1" parent="1">
          <mxGeometry x="1100" y="380" width="120" height="100" as="geometry" />
        </mxCell>

        <!-- Google Classroom -->
        <mxCell id="classroom" value="📚&lt;br&gt;&lt;b&gt;Google Classroom&lt;/b&gt;&lt;br&gt;通信配布&lt;br&gt;保護者・生徒配信" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E1F5FE;strokeColor=#0277BD;strokeWidth=2;align=center;" vertex="1" parent="1">
          <mxGeometry x="1100" y="520" width="120" height="100" as="geometry" />
        </mxCell>

        <!-- Data Flow Arrows -->
        <mxCell id="arrow1" value="" style="endArrow=classic;html=1;strokeColor=#4CAF50;strokeWidth=3;" edge="1" parent="1" source="flutter" target="cloudrun">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="200" y="250" as="sourcePoint" />
            <mxPoint x="250" y="200" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow2" value="" style="endArrow=classic;html=1;strokeColor=#4CAF50;strokeWidth=3;" edge="1" parent="1" source="voice" target="orchestrator">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="200" y="380" as="sourcePoint" />
            <mxPoint x="250" y="330" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow3" value="" style="endArrow=classic;html=1;strokeColor=#4CAF50;strokeWidth=2;" edge="1" parent="1" source="orchestrator" target="planner">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="450" y="340" as="sourcePoint" />
            <mxPoint x="500" y="340" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow4" value="" style="endArrow=classic;html=1;strokeColor=#4CAF50;strokeWidth=2;" edge="1" parent="1" source="planner" target="generator">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="570" y="340" as="sourcePoint" />
            <mxPoint x="620" y="340" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow5" value="" style="endArrow=classic;html=1;strokeColor=#FFC107;strokeWidth=2;" edge="1" parent="1" source="generator" target="gemini">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="630" y="390" as="sourcePoint" />
            <mxPoint x="630" y="470" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow6" value="" style="endArrow=classic;html=1;strokeColor=#FF9800;strokeWidth=2;" edge="1" parent="1" source="cloudrun" target="firebase_auth">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="730" y="170" as="sourcePoint" />
            <mxPoint x="1090" y="170" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow7" value="" style="endArrow=classic;html=1;strokeColor=#FF9800;strokeWidth=2;" edge="1" parent="1" source="generator" target="firestore">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="690" y="300" as="sourcePoint" />
            <mxPoint x="1090" y="300" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow8" value="" style="endArrow=classic;html=1;strokeColor=#FF9800;strokeWidth=2;" edge="1" parent="1" source="generator" target="cloud_storage">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="690" y="380" as="sourcePoint" />
            <mxPoint x="1090" y="430" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <mxCell id="arrow9" value="" style="endArrow=classic;html=1;strokeColor=#0277BD;strokeWidth=2;" edge="1" parent="1" source="cloud_storage" target="classroom">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="1160" y="490" as="sourcePoint" />
            <mxPoint x="1160" y="510" as="targetPoint" />
          </mxGeometry>
        </mxCell>

        <!-- Process Flow Labels -->
        <mxCell id="flow1" value="音声入力" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;fontSize=10;fontColor=#4CAF50;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="200" y="200" width="60" height="20" as="geometry" />
        </mxCell>

        <mxCell id="flow2" value="AI処理・協調" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;fontSize=10;fontColor=#4CAF50;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="500" y="240" width="80" height="20" as="geometry" />
        </mxCell>

        <mxCell id="flow3" value="認証・保存" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;fontSize=10;fontColor=#FF9800;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="900" y="150" width="60" height="20" as="geometry" />
        </mxCell>

        <mxCell id="flow4" value="配布・共有" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;fontSize=10;fontColor=#0277BD;fontStyle=1;" vertex="1" parent="1">
          <mxGeometry x="1240" y="490" width="60" height="20" as="geometry" />
        </mxCell>

        <!-- Technology Stack Legend -->
        <mxCell id="legend" value="&lt;b&gt;📋 技術スタック&lt;/b&gt;&lt;br&gt;🔵 Frontend: Flutter Web (PWA)&lt;br&gt;⚡ Backend: FastAPI + Google ADK&lt;br&gt;🤖 AI: Multi-Agent System&lt;br&gt;✨ LLM: Vertex AI Gemini 2.5 Flash&lt;br&gt;🔥 Infrastructure: Firebase Services&lt;br&gt;📚 Integration: Google Classroom API" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#F8F9FA;strokeColor=#DEE2E6;align=left;verticalAlign=top;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="50" y="650" width="300" height="150" as="geometry" />
        </mxCell>

        <!-- Key Features -->
        <mxCell id="features" value="&lt;b&gt;🎯 主要特徴&lt;/b&gt;&lt;br&gt;⚡ 高速処理: 2分以内で通信完成&lt;br&gt;🤖 マルチエージェント: 専門化されたAI協調&lt;br&gt;🎨 自動デザイン: グラレコ風レイアウト&lt;br&gt;📱 PWA対応: オフライン編集可能&lt;br&gt;🔄 リアルタイム: WebSocket通信&lt;br&gt;📊 品質保証: HTMLバリデーション" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFF3E0;strokeColor=#FF9800;align=left;verticalAlign=top;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="400" y="650" width="300" height="150" as="geometry" />
        </mxCell>

        <!-- Workflow Summary -->
        <mxCell id="workflow" value="&lt;b&gt;🔄 処理フロー&lt;/b&gt;&lt;br&gt;1️⃣ 音声録音・転写&lt;br&gt;2️⃣ Orchestrator → Planner 対話&lt;br&gt;3️⃣ Generator → HTML生成&lt;br&gt;4️⃣ Gemini → 文章リライト&lt;br&gt;5️⃣ Firebase → データ保存&lt;br&gt;6️⃣ Classroom → 配布・共有" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E8;strokeColor=#4CAF50;align=left;verticalAlign=top;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="750" y="650" width="300" height="150" as="geometry" />
        </mxCell>

        <!-- Innovation Points -->
        <mxCell id="innovation" value="&lt;b&gt;💡 技術革新ポイント&lt;/b&gt;&lt;br&gt;🎓 教育分野初のマルチエージェントAI&lt;br&gt;🔧 Tool/Agent分離設計思想&lt;br&gt;🎯 グラフィックレコーディング自動化&lt;br&gt;⚡ Google ADK活用による高速処理&lt;br&gt;🌐 フルクラウドネイティブ構成&lt;br&gt;🔒 エンタープライズレベルセキュリティ" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#1976D2;align=left;verticalAlign=top;fontSize=11;" vertex="1" parent="1">
          <mxGeometry x="1100" y="650" width="300" height="150" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>