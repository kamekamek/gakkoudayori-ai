# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

## æ©Ÿå¯†æƒ…å ±ç®¡ç†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### âœ… .gitignoreè¨­å®šå®Œäº†é …ç›®

#### Google Cloudãƒ»Firebaseé–¢é€£
- [x] `service-account-key.json` - ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚­ãƒ¼
- [x] `*-service-account-*.json` - å„ç¨®ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚­ãƒ¼
- [x] `firebase-config.js` - Firebaseè¨­å®š
- [x] `.firebaserc` - Firebaseè¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
- [x] `firebase-debug.log` - Firebaseãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°

#### ç’°å¢ƒå¤‰æ•°ãƒ»è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
- [x] `.env` - ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«
- [x] `.env.*` - ç’°å¢ƒåˆ¥è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
- [x] `config.json` - è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
- [x] `secrets.json` - æ©Ÿå¯†è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
- [x] `*.key`, `*.pem`, `*.p12`, `*.pfx` - å„ç¨®ã‚­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«

#### APIã‚­ãƒ¼ãƒ»èªè¨¼æƒ…å ±
- [x] `*-api-key.txt` - å„ç¨®APIã‚­ãƒ¼ãƒ•ã‚¡ã‚¤ãƒ«
- [x] `google-credentials.json` - Google APIèªè¨¼æƒ…å ±
- [x] `line-channel-secret.txt` - LINE APIã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆ
- [x] `webhook-secrets.txt` - Webhookèªè¨¼æƒ…å ±

#### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æ©Ÿå¯†æƒ…å ±
- [x] `backend/credentials/` - èªè¨¼æƒ…å ±ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
- [x] `backend/secrets/` - æ©Ÿå¯†æƒ…å ±ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
- [x] `backend/.env*` - ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«
- [x] `backend/config/production.yml` - æœ¬ç•ªè¨­å®š
- [x] `backend/config/secrets.yml` - æ©Ÿå¯†è¨­å®š

### ğŸ” å®šæœŸç¢ºèªäº‹é …

#### 1. æ©Ÿå¯†æƒ…å ±ãƒ•ã‚¡ã‚¤ãƒ«ã®è¿½è·¡çŠ¶æ³ç¢ºèª
```bash
# Gitã§è¿½è·¡ã•ã‚Œã¦ã„ã‚‹æ©Ÿå¯†æƒ…å ±ãƒ•ã‚¡ã‚¤ãƒ«ãŒãªã„ã‹ãƒã‚§ãƒƒã‚¯
git ls-files | grep -E "(credentials|\.env|secret|key\.json|firebase-config)"
```
**æœŸå¾…ã™ã‚‹çµæœ**: ä½•ã‚‚å‡ºåŠ›ã•ã‚Œãªã„ï¼ˆæ©Ÿå¯†æƒ…å ±ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¿½è·¡ã•ã‚Œã¦ã„ãªã„ï¼‰

#### 2. .gitignoreã®å‹•ä½œç¢ºèª
```bash
# ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒignoreã•ã‚Œã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
git check-ignore backend/credentials/service-account-key.json
git check-ignore backend/.env
git check-ignore frontend/web/firebase-config.js
```
**æœŸå¾…ã™ã‚‹çµæœ**: å„ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ã‚¹ãŒå‡ºåŠ›ã•ã‚Œã‚‹ï¼ˆignoreã•ã‚Œã¦ã„ã‚‹ï¼‰

#### 3. æ©Ÿå¯†æƒ…å ±ãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨ç¢ºèª
```bash
# æ©Ÿå¯†æƒ…å ±ãƒ•ã‚¡ã‚¤ãƒ«ã‚’æ¤œç´¢
find . -name "*.env" -o -name "*secret*" -o -name "*key*.json" -o -name "*credentials*"
```

### âš ï¸ ç™ºè¦‹æ™‚ã®å¯¾å¿œæ‰‹é †

#### æ©Ÿå¯†æƒ…å ±ãƒ•ã‚¡ã‚¤ãƒ«ãŒèª¤ã£ã¦ã‚³ãƒŸãƒƒãƒˆã•ã‚ŒãŸå ´åˆ

1. **å³åº§ã«ãƒªãƒã‚¸ãƒˆãƒªã‹ã‚‰å‰Šé™¤**
```bash
git rm --cached path/to/secret-file
git commit -m "Remove secret file from tracking"
```

2. **å±¥æ­´ã‹ã‚‰ã‚‚å‰Šé™¤ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰**
```bash
git filter-branch --force --index-filter \
  'git rm --cached --ignore-unmatch path/to/secret-file' \
  --prune-empty --tag-name-filter cat -- --all
```

3. **ã‚­ãƒ¼ã®ç„¡åŠ¹åŒ–ãƒ»å†ç”Ÿæˆ**
   - Google Cloud: ã‚µãƒ¼ãƒ“ã‚¹ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚­ãƒ¼ã‚’å‰Šé™¤ãƒ»å†ç”Ÿæˆ
   - Firebase: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®šã§ã‚­ãƒ¼ã‚’ãƒªã‚»ãƒƒãƒˆ
   - LINE API: ãƒãƒ£ãƒ³ãƒãƒ«ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆã‚’å†ç”Ÿæˆ

### ğŸ›¡ï¸ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

#### é–‹ç™ºæ™‚
1. **æ©Ÿå¯†æƒ…å ±ã¯ã™ã¹ã¦ç’°å¢ƒå¤‰æ•°ã§ç®¡ç†**
2. **ä¾‹ç¤ºãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ.exampleï¼‰ã‚’æ´»ç”¨**
3. **ãƒãƒ¼ãƒ å…±æœ‰ã¯å®‰å…¨ãªæ–¹æ³•ã§å®Ÿæ–½**
4. **å®šæœŸçš„ãªã‚­ãƒ¼ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³**

#### ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚
1. **æœ¬ç•ªç’°å¢ƒã§ã¯ç’°å¢ƒå¤‰æ•°ã§è¨­å®š**
2. **Cloud Run Secret Managerã®ä½¿ç”¨**
3. **æœ€å°æ¨©é™ã®åŸå‰‡**
4. **ãƒ­ã‚°ã«æ©Ÿå¯†æƒ…å ±ã‚’å‡ºåŠ›ã—ãªã„**

### ğŸ“‹ æœˆæ¬¡ãƒã‚§ãƒƒã‚¯é …ç›®

- [ ] æ©Ÿå¯†æƒ…å ±ãƒ•ã‚¡ã‚¤ãƒ«ã®è¿½è·¡çŠ¶æ³ç¢ºèª
- [ ] .gitignoreã®åŠ¹æœç¢ºèª
- [ ] ä¸è¦ãªAPIã‚­ãƒ¼ã®å‰Šé™¤
- [ ] ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ã®è¦‹ç›´ã—
- [ ] ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«ã®æ©Ÿå¯†æƒ…å ±ç¢ºèª

### ğŸš¨ ç·Šæ€¥æ™‚é€£çµ¡å…ˆ

**æ©Ÿå¯†æƒ…å ±æ¼æ´©ã‚’ç™ºè¦‹ã—ãŸå ´åˆ**
1. å³åº§ã«ã‚­ãƒ¼ãƒ»ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç„¡åŠ¹åŒ–
2. ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¤ãƒ³ã‚·ãƒ‡ãƒ³ãƒˆå ±å‘Š
3. å½±éŸ¿ç¯„å›²ã®èª¿æŸ»ãƒ»å¯¾å¿œ

### ğŸ”— å‚è€ƒãƒªãƒ³ã‚¯

- [Google Cloud ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹](https://cloud.google.com/security/best-practices)
- [Firebase ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ«ãƒ¼ãƒ«](https://firebase.google.com/docs/rules)
- [Git Secrets ãƒ„ãƒ¼ãƒ«](https://github.com/awslabs/git-secrets) 