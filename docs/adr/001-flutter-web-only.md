# ADR-001: Flutter Web専用アプリケーションとして開発

## ステータス

承認済み (2025-05-15)

## コンテキスト

学校だよりAIプロジェクトでは、教師が使用するプラットフォームを選定する必要があった。主な検討事項：

1. **ターゲットユーザー**: 小中学校の教師（25-55歳）
2. **使用環境**: 学校のPC、自宅のPC、個人のスマートフォン/タブレット
3. **技術的制約**: Quill.jsエディタの統合が必須
4. **開発リソース**: 限られた開発期間（ハッカソン向け）
5. **メンテナンス**: 長期的な保守性

## 決定

**Flutter Webのみ**でアプリケーションを開発し、ネイティブアプリ（iOS/Android）は開発しない。

## 理由

### 採用理由

1. **Quill.js統合の容易性**
   - WebViewを通じてQuill.jsを直接利用可能
   - JavaScript bridgeで双方向通信が実現できる
   - ネイティブアプリでの実装は複雑

2. **開発効率**
   - 単一コードベースでPC・スマホ・タブレット対応
   - PWA（Progressive Web App）として配布可能
   - アプリストアの審査が不要

3. **アクセシビリティ**
   - URLを共有するだけで利用開始可能
   - インストール不要で導入障壁が低い
   - 学校のPCでも権限なしで利用可能

4. **更新の即時性**
   - サーバー側の更新で全ユーザーに即反映
   - バージョン管理の複雑さを回避
   - A/Bテストが容易

### 代替案の検討

1. **ネイティブアプリ + Web**
   - 開発コスト: 3倍
   - Quill.js統合: 各プラットフォームで個別実装必要
   - 却下理由: 開発リソース不足

2. **React/Vue.js等のWebフレームワーク**
   - 開発効率: 同等
   - Flutter採用理由: Googleエコシステムとの親和性、将来的なネイティブ対応の可能性

3. **ネイティブアプリのみ**
   - PC対応: 困難
   - 主要な使用環境である学校PCで使用不可
   - 却下理由: 要件を満たさない

## 結果

### ポジティブな結果

- 開発期間を50%短縮
- すべてのデバイスで一貫したUX
- Quill.jsの全機能を活用可能
- 導入障壁の最小化

### ネガティブな結果

- オフライン機能の制限
- ネイティブAPIへのアクセス制限（カメラ、ファイルシステム等）
- パフォーマンスがブラウザに依存

### 軽減策

- Service Workerでオフライン対応を実装
- Web APIを最大限活用（MediaRecorder、File API等）
- パフォーマンス最適化（遅延読み込み、コード分割）

## 教訓

- 技術選定では、コア機能（Quill.js）との統合性を最優先すべき
- 導入障壁の低さは教育現場での採用において重要
- PWAは十分にネイティブアプリの代替となりうる

## 参考資料

- [Flutter Web ドキュメント](https://flutter.dev/web)
- [PWA vs Native App 比較](https://web.dev/progressive-web-apps/)
- [Quill.js Integration Guide](https://quilljs.com/docs/)