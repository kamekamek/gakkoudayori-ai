# Claude Code ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼è¨­è¨ˆæ›¸

**ã‚«ãƒ†ã‚´ãƒª**: DESIGN | **ãƒ¬ã‚¤ãƒ¤ãƒ¼**: DETAIL | **æ›´æ–°**: 2025-01-15  
**æ‹…å½“**: AI Assistant | **ä¾å­˜**: ãªã— | **ã‚¿ã‚°**: #claude-code #orchestrator #tmux #git-worktree

## ğŸ¯ TL;DRï¼ˆ30ç§’ã§èª­ã‚ã‚‹è¦ç´„ï¼‰

- **ç›®çš„**: Claude Codeçµ±åˆã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ä¸­å¿ƒã®ä¸¦åˆ—é–‹ç™ºç’°å¢ƒ
- **å¯¾è±¡**: é–‹ç™ºè€…ãƒ»AIã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç®¡ç†è€…
- **æˆæœç‰©**: 3è¦ª+6å­=9ãƒšã‚¤ãƒ³çµ±åˆé–‹ç™ºç’°å¢ƒ
- **æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: tmuxé…ç½®æœ€é©åŒ–ã¨ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè£…

## ğŸ“Š ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³
```
ãƒ¦ãƒ¼ã‚¶ãƒ¼
   â†“ (Claude Codeã‚³ãƒãƒ³ãƒ‰)
ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ (Claude Code)
   â†“ (ã‚¿ã‚¹ã‚¯åˆ†è§£ãƒ»æŒ‡ç¤ºé€ä¿¡)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  TMUX Session: orchestrator             â”‚
â”‚  Window: main                           â”‚
â”‚                                         â”‚
â”‚  â”Œâ”€â”€Parent1â”€â”€â”¬â”€â”€Child1-1â”€â”€â”¬â”€â”€Child1-2â”€â”â”‚
â”‚  â”‚  Quill.js â”‚   HTML     â”‚    JS     â”‚â”‚
â”‚  â”‚   Boss    â”‚  Worker    â”‚  Worker   â”‚â”‚
â”‚  â”œâ”€â”€Parent2â”€â”€â”¼â”€â”€Child2-1â”€â”€â”¼â”€â”€Child2-2â”€â”¤â”‚
â”‚  â”‚  WebView  â”‚  Flutter   â”‚  Bridge   â”‚â”‚
â”‚  â”‚   Boss    â”‚  Worker    â”‚  Worker   â”‚â”‚
â”‚  â”œâ”€â”€Parent3â”€â”€â”¼â”€â”€Child3-1â”€â”€â”¼â”€â”€Child3-2â”€â”¤â”‚
â”‚  â”‚  Gemini   â”‚   API      â”‚ Response  â”‚â”‚
â”‚  â”‚   Boss    â”‚  Worker    â”‚  Worker   â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒšã‚¤ãƒ³é…ç½®å›³ï¼ˆ3ç¸¦Ã—3æ¨ªï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Parent1 â”‚Child1-1 â”‚Child1-2 â”‚  â† Row 1: Quill.js Team
â”‚ Quill   â”‚  HTML   â”‚   JS    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Parent2 â”‚Child2-1 â”‚Child2-2 â”‚  â† Row 2: WebView Team  
â”‚ WebView â”‚ Flutter â”‚ Bridge  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Parent3 â”‚Child3-1 â”‚Child3-2 â”‚  â† Row 3: Gemini Team
â”‚ Gemini  â”‚   API   â”‚Response â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ—ï¸ æŠ€è¡“ä»•æ§˜

### Git Worktreeæˆ¦ç•¥
```bash
# è¦ªç”¨Worktreeï¼ˆ3ã¤ã®ã¿ï¼‰
../yutori-parent-quill     (feat/parent-quill)
../yutori-parent-webview   (feat/parent-webview)  
../yutori-parent-gemini    (feat/parent-gemini)

# å­ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã¯è¦ªã®ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã§ç®¡ç†
parent-quill/
  â”œâ”€â”€ html/     # Child1-1ä½œæ¥­é ˜åŸŸ
  â”œâ”€â”€ js/       # Child1-2ä½œæ¥­é ˜åŸŸ
  â””â”€â”€ shared/   # å…±é€šãƒªã‚½ãƒ¼ã‚¹

parent-webview/
  â”œâ”€â”€ flutter/  # Child2-1ä½œæ¥­é ˜åŸŸ
  â”œâ”€â”€ bridge/   # Child2-2ä½œæ¥­é ˜åŸŸ
  â””â”€â”€ shared/

parent-gemini/
  â”œâ”€â”€ api/      # Child3-1ä½œæ¥­é ˜åŸŸ
  â”œâ”€â”€ response/ # Child3-2ä½œæ¥­é ˜åŸŸ
  â””â”€â”€ shared/
```

### Tmuxé…ç½®ãƒ«ãƒ¼ãƒ«
```bash
# ã‚»ãƒƒã‚·ãƒ§ãƒ³ä½œæˆ
tmux new-session -d -s orchestrator

# ãƒšã‚¤ãƒ³åˆ†å‰²ï¼ˆ3è¡ŒÃ—3åˆ—ï¼‰
# Row 1: Quill.js Team
tmux split-window -h  # Parent1 | Child1-1
tmux split-window -h  # Parent1 | Child1-1 | Child1-2

# Row 2: WebView Team  
tmux select-pane -t 0
tmux split-window -v  # Parent2 (ä¸‹ã«è¿½åŠ )
tmux select-pane -t 2  
tmux split-window -v  # Child2-1 (ä¸‹ã«è¿½åŠ )
tmux select-pane -t 4
tmux split-window -v  # Child2-2 (ä¸‹ã«è¿½åŠ )

# Row 3: Gemini Team
tmux select-pane -t 1
tmux split-window -v  # Parent3 (ä¸‹ã«è¿½åŠ )
tmux select-pane -t 4
tmux split-window -v  # Child3-1 (ä¸‹ã«è¿½åŠ )  
tmux select-pane -t 6
tmux split-window -v  # Child3-2 (ä¸‹ã«è¿½åŠ )
```

## ğŸ”„ é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«

### ãƒ•ãƒ­ãƒ¼1: ã‚¿ã‚¹ã‚¯é–‹å§‹
```mermaid
sequenceDiagram
    participant U as ãƒ¦ãƒ¼ã‚¶ãƒ¼
    participant O as ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼
    participant P1 as Parent1(Quill)
    participant P2 as Parent2(WebView)
    participant P3 as Parent3(Gemini)
    
    U->>O: /task "Quill.jsçµ±åˆå®Ÿè£…"
    O->>O: ã‚¿ã‚¹ã‚¯åˆ†è§£ãƒ»è¨ˆç”»
    O->>P1: "HTML+JSå®Ÿè£…é–‹å§‹"
    O->>P2: "WebViewçµ±åˆé–‹å§‹"
    O->>P3: "APIåŸºç›¤å®Ÿè£…é–‹å§‹"
```

### ãƒ•ãƒ­ãƒ¼2: è¦ªâ†’å­æŒ‡ç¤º
```mermaid
sequenceDiagram
    participant P1 as Parent1
    participant C11 as Child1-1(HTML)
    participant C12 as Child1-2(JS)
    
    P1->>C11: "web/quill/index.htmlä½œæˆ"
    P1->>C12: "Quill.jsçµ±åˆã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè£…"
    C11->>P1: "HTMLå®Œäº†å ±å‘Š"
    C12->>P1: "JSå®Œäº†å ±å‘Š"
    P1->>P1: "çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ"
```

### ã‚³ãƒãƒ³ãƒ‰é€ä¿¡æ–¹å¼
```bash
# ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ â†’ è¦ªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ
send_to_parent() {
    local parent_id=$1
    local command=$2
    local pane_id=$((parent_id - 1)) # 0,1,2
    
    tmux send-keys -t orchestrator:0.$pane_id "$command" Enter
    echo "[ORCHESTRATORâ†’PARENT$parent_id] $command"
}

# è¦ªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ â†’ å­ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆ  
send_to_child() {
    local parent_id=$1
    local child_num=$2  # 1 or 2
    local command=$3
    local pane_id=$((parent_id * 2 + child_num - 1))
    
    tmux send-keys -t orchestrator:0.$pane_id "$command" Enter
    echo "[PARENT$parent_idâ†’CHILD$parent_id-$child_num] $command"
}
```

## ğŸ“‹ å®Ÿè£…ä»•æ§˜

### Claude Codeã‚³ãƒãƒ³ãƒ‰çµ±åˆ
```bash
# ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼ç”¨ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰
/task <description>     # ã‚¿ã‚¹ã‚¯åˆ†è§£ãƒ»é…å¸ƒ
/status                 # å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçŠ¶æ…‹ç¢ºèª
/parent <id> <command>  # ç‰¹å®šè¦ªã¸ã®ç›´æ¥æŒ‡ç¤º
/child <p-id> <c-id> <command>  # ç‰¹å®šå­ã¸ã®ç›´æ¥æŒ‡ç¤º
/report                 # å®Œäº†å ±å‘Šåé›†
/reset                  # å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒªã‚»ãƒƒãƒˆ
```

### ãƒ•ã‚¡ã‚¤ãƒ«é…ç½®
```
scripts/
â”œâ”€â”€ orchestrator_setup.sh       # ç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
â”œâ”€â”€ orchestrator_start.sh       # ã‚·ã‚¹ãƒ†ãƒ èµ·å‹•
â”œâ”€â”€ orchestrator_commands.sh    # ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
â”œâ”€â”€ parent_manager.sh           # è¦ªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç®¡ç†
â”œâ”€â”€ child_manager.sh            # å­ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç®¡ç†
â”œâ”€â”€ communication.sh            # é€šä¿¡ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â””â”€â”€ monitor.sh                  # ç›£è¦–ãƒ»ãƒ­ã‚°

configs/
â”œâ”€â”€ orchestrator.md             # ã‚ªãƒ¼ã‚±ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¿ãƒ¼æŒ‡ç¤ºæ›¸
â”œâ”€â”€ parent_templates/           # è¦ªã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­å®š
â”‚   â”œâ”€â”€ quill_parent.md
â”‚   â”œâ”€â”€ webview_parent.md
â”‚   â””â”€â”€ gemini_parent.md
â””â”€â”€ child_templates/            # å­ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­å®š
    â”œâ”€â”€ html_worker.md
    â”œâ”€â”€ js_worker.md
    â”œâ”€â”€ flutter_worker.md
    â”œâ”€â”€ bridge_worker.md
    â”œâ”€â”€ api_worker.md
    â””â”€â”€ response_worker.md
```

## ğŸ¯ å®Ÿè£…å„ªå…ˆé †ä½

### Phase 1: åŸºç›¤æ§‹ç¯‰
1. **tmuxé…ç½®æœ€é©åŒ–** (30åˆ†)
   - 3Ã—3ãƒšã‚¤ãƒ³é…ç½®ã®å®Ÿè£…
   - ãƒšã‚¤ãƒ³ç•ªå·ã¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒãƒƒãƒ”ãƒ³ã‚°

2. **Git Worktreeç°¡ç´ åŒ–** (20åˆ†)
   - è¦ªç”¨3Worktreeã®ã¿ä½œæˆ
   - å­ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆç”¨ã‚µãƒ–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

3. **é€šä¿¡ãƒ©ã‚¤ãƒ–ãƒ©ãƒª** (40åˆ†)
   - send_to_parenté–¢æ•°
   - send_to_childé–¢æ•°
   - çŠ¶æ…‹ç¢ºèªæ©Ÿèƒ½

### Phase 2: Claude Codeçµ±åˆ
1. **ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰** (60åˆ†)
   - /taskã‚³ãƒãƒ³ãƒ‰å®Ÿè£…
   - /statusã‚³ãƒãƒ³ãƒ‰å®Ÿè£…
   - /reportã‚³ãƒãƒ³ãƒ‰å®Ÿè£…

2. **æŒ‡ç¤ºæ›¸ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ** (30åˆ†)
   - å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå½¹å‰²å®šç¾©
   - é€šä¿¡ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆæ¨™æº–åŒ–

### Phase 3: ç›£è¦–ãƒ»ç®¡ç†
1. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–** (45åˆ†)
   - ãƒ­ã‚°é›†ç´„ã‚·ã‚¹ãƒ†ãƒ 
   - é€²æ—ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

2. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°** (30åˆ†)
   - é€šä¿¡å¤±æ•—æ™‚ã®å¾©æ—§
   - ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå†èµ·å‹•æ©Ÿèƒ½

## ğŸ” å¾“æ¥ã‚·ã‚¹ãƒ†ãƒ ã¨ã®æ¯”è¼ƒ

| é …ç›® | å¾“æ¥(v3.0) | æ–°è¨­è¨ˆ(Orchestrator) |
|------|------------|---------------------|
| ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ•° | 13 (1+3+9) | 7 (1+3+3Ã—2) |
| Tmuxãƒšã‚¤ãƒ³æ•° | 13 | 9 |
| Git Worktree | 13å€‹ | 3å€‹ |
| ç®¡ç†è¤‡é›‘åº¦ | é«˜ | ä¸­ |
| Claude Codeçµ±åˆ | ãªã— | ãƒã‚¤ãƒ†ã‚£ãƒ– |
| é€šä¿¡çµŒè·¯ | è¤‡é›‘ | ã‚·ãƒ³ãƒ—ãƒ« |
| ãƒ‡ãƒãƒƒã‚°å®¹æ˜“åº¦ | å›°é›£ | å®¹æ˜“ |

## âœ… å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### åŸºç›¤ã‚·ã‚¹ãƒ†ãƒ 
- [ ] tmux 3Ã—3ãƒšã‚¤ãƒ³é…ç½®å®Ÿè£…
- [ ] Git Worktree 3å€‹ä½œæˆ
- [ ] ãƒšã‚¤ãƒ³â†”ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒãƒƒãƒ”ãƒ³ã‚°
- [ ] é€šä¿¡ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå®Ÿè£…

### Claude Codeçµ±åˆ  
- [ ] ã‚«ã‚¹ã‚¿ãƒ ã‚³ãƒãƒ³ãƒ‰é–‹ç™º
- [ ] ã‚¿ã‚¹ã‚¯åˆ†è§£ã‚¨ãƒ³ã‚¸ãƒ³
- [ ] æŒ‡ç¤ºé€ä¿¡ã‚·ã‚¹ãƒ†ãƒ 
- [ ] å®Œäº†å ±å‘Šåé›†

### ç®¡ç†ãƒ»ç›£è¦–
- [ ] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ çŠ¶æ…‹ç¢ºèª
- [ ] ãƒ­ã‚°é›†ç´„ã‚·ã‚¹ãƒ†ãƒ 
- [ ] ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- [ ] å¾©æ—§æ©Ÿèƒ½

---

**æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: orchestrator_setup.sh ã®å®Ÿè£…é–‹å§‹ 